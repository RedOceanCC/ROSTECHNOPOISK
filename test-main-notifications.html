<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π - –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .debug-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            background: white;
            border: 2px solid #007bff;
            border-radius: 8px;
            padding: 15px;
            max-width: 400px;
            z-index: 10000;
            font-family: monospace;
            font-size: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .debug-panel h3 {
            margin: 0 0 10px 0;
            color: #007bff;
        }
        .debug-log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 8px;
            max-height: 200px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .test-btn {
            margin: 5px;
            padding: 8px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            background: #007bff;
            color: white;
        }
        .mock-dashboard {
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .mock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .notifications-btn {
            background: #17a2b8;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            position: relative;
        }
        .notifications-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #dc3545;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <!-- –ú–æ–∫ –¥–∞—à–±–æ—Ä–¥–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div class="mock-dashboard">
        <div class="mock-header">
            <h1>–¢–ï–°–¢: –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h1>
            <button class="notifications-btn" id="test-notifications-btn">
                <span class="notifications-icon">üîî</span>
                <span class="notifications-badge" id="test-notifications-count">3</span>
            </button>
        </div>
        
        <p>–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç —Å–∏—Å—Ç–µ–º—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏.</p>
        <p>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (üîî) –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É.</p>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–∫–æ–ø–∏—è –∏–∑ index.html) -->
    <div id="notifications-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content notifications-modal-content">
            <div class="modal-header">
                <h3>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                <div class="notifications-header-actions">
                    <button class="btn btn--secondary btn--small" id="mark-all-read-btn">–û—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏</button>
                    <button class="modal-close">&times;</button>
                </div>
            </div>
            <div class="modal-body notifications-modal-body">
                <div class="notifications-filters">
                    <button class="notifications-filter active" data-filter="all">–í—Å–µ</button>
                    <button class="notifications-filter" data-filter="unread">–ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ</button>
                    <button class="notifications-filter" data-filter="requests">–ó–∞—è–≤–∫–∏</button>
                    <button class="notifications-filter" data-filter="auctions">–ê—É–∫—Ü–∏–æ–Ω—ã</button>
                    <button class="notifications-filter" data-filter="system">–°–∏—Å—Ç–µ–º–∞</button>
                </div>
                <div class="notifications-list" id="notifications-list">
                    <div class="empty-state">
                        <div class="empty-state-icon">üì™</div>
                        <h3>–ù–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h3>
                        <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –∞—É–∫—Ü–∏–æ–Ω–æ–≤ –∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –æ—Ç–ª–∞–¥–∫–∏ -->
    <div class="debug-panel">
        <h3>üîß –û—Ç–ª–∞–¥–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h3>
        <div>
            <button class="test-btn" onclick="runDebug()">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</button>
            <button class="test-btn" onclick="testModal()">–¢–µ—Å—Ç –º–æ–¥–∞–ª–∞</button>
            <button class="test-btn" onclick="clearLog()">–û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
        <div class="debug-log" id="debug-log"></div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã -->
    <script src="notifications.js"></script>
    <script src="validation.js"></script>
    <script src="app.js"></script>

    <script>
        let debugLog = document.getElementById('debug-log');

        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            debugLog.textContent += `[${timestamp}] ${message}\n`;
            debugLog.scrollTop = debugLog.scrollHeight;
            console.log(message);
        }

        function clearLog() {
            debugLog.textContent = '';
        }

        function runDebug() {
            clearLog();
            log('üîß –ó–∞–ø—É—Å–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏...');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
            log('üìä –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã:');
            log(`  notifications: ${typeof window.notifications}`);
            log(`  notificationCenter: ${typeof window.notificationCenter}`);
            log(`  notificationManager: ${typeof window.notificationManager}`);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ DOM
            const btns = document.querySelectorAll('.notifications-btn');
            log(`  –ö–Ω–æ–ø–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π: ${btns.length}`);
            
            const modal = document.getElementById('notifications-modal');
            log(`  –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: ${!!modal}`);
            
            if (modal) {
                log(`  –ú–æ–¥–∞–ª —Å–∫—Ä—ã—Ç: ${modal.classList.contains('hidden')}`);
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
            if (window.notificationCenter) {
                log('‚úÖ NotificationCenter –Ω–∞–π–¥–µ–Ω');
                if (typeof window.notificationCenter.openModal === 'function') {
                    log('‚úÖ –ú–µ—Ç–æ–¥ openModal –¥–æ—Å—Ç—É–ø–µ–Ω');
                }
            } else {
                log('‚ùå NotificationCenter –Ω–µ –Ω–∞–π–¥–µ–Ω');
            }
        }

        function testModal() {
            log('üîî –¢–µ—Å—Ç–∏—Ä—É–µ–º –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∞...');
            
            if (window.notificationCenter && typeof window.notificationCenter.openModal === 'function') {
                window.notificationCenter.openModal();
                log('‚úÖ –í—ã–∑–≤–∞–Ω openModal()');
                
                setTimeout(() => {
                    const modal = document.getElementById('notifications-modal');
                    const isOpen = modal && !modal.classList.contains('hidden');
                    log(`–ú–æ–¥–∞–ª –æ—Ç–∫—Ä—ã—Ç: ${isOpen}`);
                }, 100);
            } else {
                log('‚ùå openModal() –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
            }
        }

        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
        window.addEventListener('load', () => {
            setTimeout(() => {
                log('üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
                runDebug();
            }, 1000);
        });

        // –ü–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫
        window.addEventListener('error', (e) => {
            log(`‚ùå JS –æ—à–∏–±–∫–∞: ${e.message}`);
            log(`   –§–∞–π–ª: ${e.filename}:${e.lineno}`);
        });
    </script>
</body>
</html>
